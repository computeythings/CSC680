(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[396],{3610:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(7876),n=a(5),c=a(4232);function l(e){let{selectedLot:t,onLotSelect:a}=e,[l,r]=(0,c.useState)([]);return(0,c.useEffect)(()=>{n.nV.getLots().then(e=>{200==e.statusCode?r(e.data.data):alert("Unable to connect to server.")})},[]),(0,s.jsxs)("div",{className:"flex items-center justify-center relative p-4",children:[(0,s.jsx)("span",{className:"float-right",children:"Parking Lot:"}),(0,s.jsxs)("select",{value:t,onChange:a,className:"p-1 border min-w-80",children:[(0,s.jsx)("option",{value:-1,disabled:!0,hidden:!0,children:"-- Select a Lot --"}),l.map(e=>(0,s.jsx)("option",{value:e.id,children:"".concat(e.street," ").concat(e.city,", ").concat(e.state," ").concat(e.zip_code)},e.id))]})]})}},6020:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/valet/carwash",function(){return a(7605)}])},7605:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(7876),n=a(4232),c=a(3610),l=a(5);function r(){let[e,t]=(0,n.useState)(-1),[a,r]=(0,n.useState)([]),d=e=>e?new Date(e.replace(" ","T")+"Z").toLocaleString():"Unknown Entry Time";return(0,s.jsx)("div",{className:"w-full content-center min-w-300",children:(0,s.jsx)("div",{className:"bg-white mx-auto gap-4 text-black w-3/4 border",children:(0,s.jsxs)("div",{className:"flex flex-col w-full text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold my-4",children:"CAR WASH SCHEDULE"}),(0,s.jsx)(c.A,{selectedLot:e,onLotSelect:e=>{let a=Number(e.target.value);t(a),l.$C.getLot(a).then(e=>{200==e.statusCode?r(e.data.data):alert("Could not load data")})}}),(0,s.jsx)("div",{className:"m-4 ".concat(a.length>0?"":"hidden"),children:(0,s.jsxs)("table",{className:"w-full text-center",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Spot"}),(0,s.jsx)("th",{children:"Customer"}),(0,s.jsx)("th",{children:"Check In"}),(0,s.jsx)("th",{children:"Vehicle"}),(0,s.jsx)("th",{children:"Status"})]})}),(0,s.jsx)("tbody",{children:a.filter(e=>e.carwash).sort((e,t)=>new Date(t.start).getTime()-new Date(e.start).getTime()).map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"".concat(e.spot)}),(0,s.jsx)("td",{children:"".concat(e.lastname,", ").concat(e.firstname)}),(0,s.jsx)("td",{children:d(e.start)}),(0,s.jsx)("td",{children:"".concat(e.make," ").concat(e.model," - ").concat(e.licenseplate)}),(0,s.jsx)("td",{className:"font-bold ".concat(e.washed?"text-green-500":"text-red-500"),children:e.washed?"COMPLETE":"INCOMPLETE"})]},e.slot_id))})]})})]})})})}var d=a(4598),i=a(9099);function o(){let{user:e}=(0,d.A)(),t=(0,i.useRouter)(),[a,c]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{c(!1)},[e,t]),a)?null:e?["admin","valet"].includes(e.role)?(localStorage.removeItem("redirect"),(0,s.jsx)(r,{})):t.push("/"):(localStorage.setItem("redirect","/valet/carwash/"),t.push("/login/"),null)}},9099:(e,t,a)=>{e.exports=a(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(6020)),_N_E=e.O()}]);