(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[803],{3002:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/parking/checkout",function(){return r(4392)}])},4392:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(7876),s=r(4598),a=r(5),l=r(9099),c=r(4232);function i(){let{user:e}=(0,s.A)(),t=(0,l.useRouter)(),[r,i]=(0,c.useState)(!0),[o,d]=(0,c.useState)(""),[u,h]=(0,c.useState)(0),[m,x]=(0,c.useState)(null),[p,g]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{i(!1)},[e,t]),r)return null;if(!e)return localStorage.setItem("redirect","/parking/checkout/"),t.push("/login/"),null;localStorage.removeItem("redirect");let f=e=>{let t=e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),r=e.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase().replace(/,/g,"");return"".concat(t," ").concat(r)},v=()=>m?m.end.getTime()-m.start.getTime():0,j=()=>{g(!1),m?(d(""),x(null)):a.nV.customerCheckout(o).then(e=>{if(200===e.statusCode){let t=e.data.data,r=new Date("".concat(t.end,"Z"));x({start:new Date("".concat(t.start,"Z")),end:r})}else g(!0)})};return(0,n.jsx)("div",{className:"w-full content-center min-w-150",children:(0,n.jsx)("div",{className:"bg-white mx-auto gap-4 text-black w-3/4 border",children:(0,n.jsxs)("div",{className:"flex flex-col w-full text-center",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold my-4",children:"CUSTOMER CHECKOUT"}),(0,n.jsxs)("div",{className:"m-4",children:[(0,n.jsxs)("div",{children:["Parking Slip #:",(0,n.jsx)("input",{type:"number",className:"border ml-2 pl-2 focus:outline-none ".concat(p?"border-red-500":""),onKeyDown:e=>{"Enter"===e.key&&j()},value:o,readOnly:null!==m,onChange:e=>{g(!1),d(e.target.value)}})]}),m?(0,n.jsx)("div",{className:"py-8 pb-4 mx-auto",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 text-left gap-x-12",children:[(0,n.jsx)("div",{className:"text-right",children:"Time Entered:"}),(0,n.jsx)("div",{children:f(m.start)}),(0,n.jsx)("div",{className:"text-right",children:"Time Exited:"}),(0,n.jsx)("div",{children:f(m.end)}),(0,n.jsx)("div",{className:"text-right",children:"Total Duration:"}),(0,n.jsx)("div",{children:(e=>{let t=e/1e3,r=Math.floor(t/3600),n=Math.floor(t%3600/60);return"".concat(r," hours ").concat(n," minutes")})(v())}),(0,n.jsx)("div",{className:"text-right",children:"Cost per hour:"}),(0,n.jsx)("div",{children:"$1"}),(0,n.jsxs)("div",{className:"text-center pt-4 col-span-2",children:[(0,n.jsx)("span",{className:"font-bold pr-4",children:"TOTAL: "}),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.ceil(v()/1e3/3600))]})]})}):null,(0,n.jsx)("button",{className:"border cursor-pointer hover:shadow-sm mt-4 px-2",onClick:j,children:m?"Clear":"Checkout"})]})]})})})}function o(){return(0,n.jsx)(i,{})}},9099:(e,t,r)=>{e.exports=r(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(3002)),_N_E=e.O()}]);