(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{2378:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/parking/lots",function(){return l(4978)}])},3610:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var n=l(7876),s=l(5),r=l(4232);function a(e){let{selectedLot:t,onLotSelect:l}=e,[a,c]=(0,r.useState)([]);return(0,r.useEffect)(()=>{s.nV.getLots().then(e=>{200==e.statusCode?c(e.data.data):alert("Unable to connect to server.")})},[]),(0,n.jsxs)("div",{className:"flex items-center justify-center relative p-4",children:[(0,n.jsx)("span",{className:"float-right",children:"Parking Lot:"}),(0,n.jsxs)("select",{value:t,onChange:l,className:"p-1 border min-w-80",children:[(0,n.jsx)("option",{value:-1,disabled:!0,hidden:!0,children:"-- Select a Lot --"}),a.map(e=>(0,n.jsx)("option",{value:e.id,children:"".concat(e.street," ").concat(e.city,", ").concat(e.state," ").concat(e.zip_code)},e.id))]})]})}},4978:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var n=l(7876),s=l(5),r=l(4232),a=l(3610);function c(){let[e,t]=(0,r.useState)(-1),[l,c]=(0,r.useState)([]);return(0,n.jsx)("div",{className:"w-full content-center",children:(0,n.jsx)("div",{className:"bg-white mx-auto gap-4 text-black w-3/4 border",children:(0,n.jsxs)("div",{className:"flex flex-col w-full text-center",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold my-4",children:"PARKING LOTS"}),(0,n.jsx)(a.A,{selectedLot:e,onLotSelect:e=>{let l=Number(e.target.value);t(l),s.nV.getLot(l).then(e=>{200==e.statusCode?c(e.data.data):alert("Could not load data")})}}),(0,n.jsx)("div",{className:"m-4 ".concat(l.length>0?"":"hidden"),children:(0,n.jsxs)("table",{className:"w-full text-center",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:"Total Slots"}),(0,n.jsx)("th",{children:"Free Slots"}),(0,n.jsx)("th",{children:"Occupied Slots"})]})}),(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{}),(0,n.jsx)("td",{children:l.length}),(0,n.jsx)("td",{children:l.filter(e=>null===e.parked).length}),(0,n.jsx)("td",{children:l.filter(e=>null!==e.parked).length})]}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:4,className:"h-5 !border-none p-0 bg-transparent"})}),[...l.reduce((e,t)=>(e.get(t.level)||e.set(t.level,[]),e.get(t.level).push(t),e),new Map).entries()].map(e=>{let[t,l]=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Floor ".concat(t)}),(0,n.jsx)("td",{children:l.length}),(0,n.jsx)("td",{children:l.filter(e=>null===e.parked).length}),(0,n.jsx)("td",{children:l.filter(e=>null!==e.parked).length})]},t)})]})]})})]})})})}var d=l(4598),i=l(9099);function o(){let{user:e}=(0,d.A)(),t=(0,i.useRouter)(),[l,s]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{s(!1)},[e,t]),l)?null:e?["admin","parking_attendant"].includes(e.role)?(localStorage.removeItem("redirect"),(0,n.jsx)(c,{})):t.push("/"):(localStorage.setItem("redirect","/parking/lots/"),t.push("/login/"),null)}},9099:(e,t,l)=>{e.exports=l(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(2378)),_N_E=e.O()}]);