(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{2378:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/parking/lots",function(){return l(4978)}])},3610:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});var s=l(7876),n=l(5),a=l(4232);function r(e){let{selectedLot:t,onLotSelect:l}=e,[r,c]=(0,a.useState)([]);return(0,a.useEffect)(()=>{n.nV.getLots().then(e=>{200==e.statusCode?c(e.data.data):alert("Unable to connect to server.")})},[]),(0,s.jsxs)("div",{className:"flex items-center justify-center relative p-4",children:[(0,s.jsx)("span",{className:"float-right",children:"Parking Lot:"}),(0,s.jsxs)("select",{value:t,onChange:l,className:"p-1 border min-w-80",children:[(0,s.jsx)("option",{value:-1,disabled:!0,hidden:!0,children:"-- Select a Lot --"}),r.map(e=>(0,s.jsx)("option",{value:e.id,children:"".concat(e.street," ").concat(e.city,", ").concat(e.state," ").concat(e.zip_code)},e.id))]})]})}},4978:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var s=l(7876),n=l(4598),a=l(5),r=l(9099),c=l(4232),d=l(3610);function i(){let{user:e}=(0,n.A)(),t=(0,r.useRouter)(),[l,i]=(0,c.useState)(!0),[o,h]=(0,c.useState)(-1),[u,x]=(0,c.useState)([]),[j,p]=(0,c.useState)([]);return((0,c.useEffect)(()=>{a.nV.getLots().then(e=>{200==e.statusCode?x(e.data.data):alert("Unable to connect to server.")}).finally(()=>{i(!1)})},[e,t]),l)?null:e?(localStorage.removeItem("redirect"),(0,s.jsx)("div",{className:"w-full content-center",children:(0,s.jsx)("div",{className:"bg-white mx-auto gap-4 text-black w-3/4 border",children:(0,s.jsxs)("div",{className:"flex flex-col w-full text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold my-4",children:"PARKING LOTS"}),(0,s.jsx)(d.A,{selectedLot:o,onLotSelect:e=>{let t=Number(e.target.value);h(t),a.nV.getLot(t).then(e=>{200==e.statusCode?p(e.data.data):alert("Could not load data")})}}),(0,s.jsx)("div",{className:"m-4 ".concat(j.length>0?"":"hidden"),children:(0,s.jsxs)("table",{className:"w-full text-center",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{}),(0,s.jsx)("th",{children:"Total Slots"}),(0,s.jsx)("th",{children:"Free Slots"}),(0,s.jsx)("th",{children:"Occupied Slots"})]})}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{}),(0,s.jsx)("td",{children:j.length}),(0,s.jsx)("td",{children:j.filter(e=>null===e.parked).length}),(0,s.jsx)("td",{children:j.filter(e=>null!==e.parked).length})]}),(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,className:"h-5 !border-none p-0 bg-transparent"})}),[...j.reduce((e,t)=>(e.get(t.level)||e.set(t.level,[]),e.get(t.level).push(t),e),new Map).entries()].map(e=>{let[t,l]=e;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Floor ".concat(t)}),(0,s.jsx)("td",{children:l.length}),(0,s.jsx)("td",{children:l.filter(e=>null===e.parked).length}),(0,s.jsx)("td",{children:l.filter(e=>null!==e.parked).length})]},t)})]})]})})]})})})):(localStorage.setItem("redirect","/parking/lots/"),t.push("/login/"),null)}function o(){return(0,s.jsx)(i,{})}},9099:(e,t,l)=>{e.exports=l(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(2378)),_N_E=e.O()}]);